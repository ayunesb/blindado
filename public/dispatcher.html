<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Dispatcher — Match Booking</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;max-width:800px;margin:32px auto;padding:0 16px}
    input,button{padding:.7rem .75rem;border:1px solid #ccc;border-radius:10px;font-size:16px}
    .card{border:1px solid #e5e5e5;border-radius:14px;padding:16px;margin:16px 0;background:#fff}
    pre{background:#f6f6f6;border-radius:12px;padding:12px;overflow:auto}
    button.primary{background:#111;color:#fff;border-color:#111;cursor:pointer}
  </style>
</head>
<body>
  <h1>Dispatcher – Match Booking</h1>
  <div class="row">
    <input id="bid" placeholder="booking_id (UUID)" style="min-width:520px" />
    <button id="run" class="primary">Run matching</button>
  </div>
  <div class="card">
    <h3>Output</h3>
    <pre id="out">Paste a booking_id you just created in client page.</pre>
  </div>

<script>
const FN = "https://isnezquuwepqcjkaupjh.supabase.co/functions/v1";
const $ = (id)=>document.getElementById(id);
$("run").onclick = async () => {
  const booking_id = $("bid").value.trim();
  const r = await fetch(`${FN}/matching`, {
    method:"POST", headers:{"Content-Type":"application/json"}, body: JSON.stringify({ booking_id })
  });
  $("out").textContent = JSON.stringify(await r.json(),null,2);
};
</script>
</body>
</html>
